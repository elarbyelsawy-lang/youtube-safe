<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙŠÙˆØªÙŠÙˆØ¨ Ø¢Ù…Ù† - Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù…ÙØ®ØªØ§Ø±</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg,#1e3c72 0%,#2a5298 100%); color:#fff; min-height:100vh; padding:20px; }
        .container { max-width:1400px; margin:0 auto; }
        header { text-align:center; margin-bottom:40px; background: rgba(255,255,255,0.1); padding:30px; border-radius:15px; backdrop-filter:blur(10px); }
        h1 { font-size:2.5em; margin-bottom:10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .subtitle { font-size:1.2em; opacity:0.9; }
        .search-box { margin-bottom:30px; text-align:center; }
        #searchInput { width:100%; max-width:600px; padding:15px 20px; font-size:1.1em; border:none; border-radius:50px; background: rgba(255,255,255,0.95); color:#333; outline:none; box-shadow:0 4px 15px rgba(0,0,0,0.2); }
        #searchInput::placeholder { color:#999; }
        .loading { text-align:center; font-size:1.3em; padding:40px; background: rgba(255,255,255,0.1); border-radius:15px; margin:20px 0; }
        .loading-progress { margin-top:15px; font-size:0.9em; opacity:0.8; }
        .error { background: rgba(255,59,48,0.2); border:2px solid #ff3b30; padding:20px; border-radius:15px; text-align:center; margin:20px 0; }
        .videos-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(320px,1fr)); gap:25px; margin-top:30px; }
        .video-card { background: rgba(255,255,255,0.1); border-radius:15px; overflow:hidden; transition: transform 0.3s, box-shadow 0.3s; backdrop-filter:blur(10px); }
        .video-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .video-thumbnail { position:relative; width:100%; padding-bottom:56.25%; background:#000; cursor:pointer; }
        .video-thumbnail img { position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; }
        .play-button { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:68px; height:48px; background: rgba(255,0,0,0.9); border-radius:12px; transition: background 0.3s; }
        .play-button::before { content:''; position:absolute; top:50%; left:55%; transform:translate(-50%,-50%); width:0; height:0; border-left:20px solid white; border-top:12px solid transparent; border-bottom:12px solid transparent; }
        .video-thumbnail:hover .play-button { background: rgba(255,0,0,1); }
        .video-info { padding:15px; }
        .video-title { font-size:1em; font-weight:600; margin-bottom:8px; line-height:1.4; height:2.8em; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; }
        .video-channel { font-size:0.9em; opacity:0.8; margin-bottom:5px; }
        .video-date { font-size:0.85em; opacity:0.6; }
        .video-player { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.95); z-index:1000; justify-content:center; align-items:center; }
        .video-player.active { display:flex; }
        .player-container { position:relative; width:90%; max-width:1200px; aspect-ratio:16/9; }
        .close-button { position:absolute; top:-50px; right:0; background:#ff3b30; color:white; border:none; padding:12px 24px; font-size:1.1em; border-radius:8px; cursor:pointer; font-weight:bold; transition:background 0.3s; }
        .close-button:hover { background:#ff1f14; }
        iframe { width:100%; height:100%; border:none; border-radius:10px; }
        .stats { text-align:center; margin:20px 0; font-size:1.1em; opacity:0.9; }
        @media (max-width:768px){ h1{font-size:1.8em;} .videos-grid{grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:15px;} .player-container{width:95%;} .close-button{top:-45px; padding:10px 20px; font-size:1em;} }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“ ÙŠÙˆØªÙŠÙˆØ¨ Ø¢Ù…Ù† Ù„Ù„ØªØ¹Ù„Ù…</h1>
            <p class="subtitle">Ù…Ø­ØªÙˆÙ‰ ØªØ¹Ù„ÙŠÙ…ÙŠ Ù…ÙØ®ØªØ§Ø± Ø¨Ø¹Ù†Ø§ÙŠØ© Ù…Ù† Ù‚Ù†ÙˆØ§Øª Ù…ÙˆØ«ÙˆÙ‚Ø©</p>
        </header>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙŠØ¯ÙŠÙˆ Ù…Ø¹ÙŠÙ†...">
        </div>

        <div id="statsContainer" class="stats"></div>
        <div id="loadingContainer" class="loading">
            â³ Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª...
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
        <div id="errorContainer"></div>
        <div id="videosContainer" class="videos-grid"></div>
    </div>

    <div id="videoPlayer" class="video-player">
        <div class="player-container">
            <button class="close-button" onclick="closeVideo()">âœ• Ø¥ØºÙ„Ø§Ù‚</button>
            <iframe id="playerFrame" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
    </div>

    <script>
        // âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª - Ø¹Ø¯Ù‘Ù„ Ù‡Ù†Ø§!
        const CONFIG = {
            API_KEY: 'AIzaSyDi3fVd6RYp7zuncdyaUbUpdhbdztdWvrI',
            ALLOWED_CHANNELS: [
                'UCN6hQCg6tIs5x6CoYLwXlhQ',
                'UCMmiGP6imlrwLP3oy34wbxA',
                'UCdur25RCItdfoXA89ORWSkw',
                'UCGLqLYzjWYuPTUhC9QireWg',
                'UClvucpj2qZ3OUM2not9YVpA',
                'UCwbUIqOxivtwVkSA8Cm87aA',
                'UCYTe2pbx_83PMClEm7JZQCA',
                'UChGiPYEm5gLRwFmKPVrk-_Q',
                'UCOKKttQBUqmenmwur2a57Jg',
                'UCSvnSxC5f1W8ogXMC38IbzA'
            ],
            // Ø¹Ø¯Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† ÙƒÙ„ Ù‚Ù†Ø§Ø© (50 Ø£Ùˆ 100 Ø£Ùˆ 150 Ø£Ùˆ 200)
            MAX_VIDEOS_PER_CHANNEL: 200
        };

        let allVideos = [];
        let filteredVideos = [];

        window.addEventListener('DOMContentLoaded', () => {
            if (!CONFIG.API_KEY) { showError('âš ï¸ Ø®Ø·Ø£: ÙŠØ¬Ø¨ ÙˆØ¶Ø¹ API Key ÙÙŠ Ø§Ù„ÙƒÙˆØ¯!'); return; }
            if (CONFIG.ALLOWED_CHANNELS.length === 0) { showError('âš ï¸ Ø®Ø·Ø£: ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØ© Channel IDs Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©!'); return; }
            loadAllVideos();
        });

        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.trim().toLowerCase();
            filteredVideos = searchTerm === '' ? [...allVideos] : allVideos.filter(v => v.title.toLowerCase().includes(searchTerm) || v.channelTitle.toLowerCase().includes(searchTerm));
            displayVideos(filteredVideos);
        });

        async function loadAllVideos() {
            document.getElementById('loadingContainer').style.display = 'block';
            document.getElementById('errorContainer').innerHTML = '';
            allVideos = [];

            try {
                // Ø¬Ù„Ø¨ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ù…Ù† ÙƒÙ„ Ù‚Ù†Ø§Ø© ÙˆØ§Ø­Ø¯Ø© ØªÙ„Ùˆ Ø§Ù„Ø£Ø®Ø±Ù‰ Ù…Ø¹ Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø¯Ù…
                for (let i = 0; i < CONFIG.ALLOWED_CHANNELS.length; i++) {
                    const channelId = CONFIG.ALLOWED_CHANNELS[i];
                    updateLoadingProgress(i + 1, CONFIG.ALLOWED_CHANNELS.length);
                    
                    const videos = await fetchChannelVideos(channelId);
                    if (videos.length > 0) {
                        allVideos.push(...videos);
                    }
                }

                if(allVideos.length === 0) { 
                    showError('âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª!<br>ØªØ£ÙƒØ¯ Ù…Ù†:<br>1. ØµØ­Ø© Channel IDs<br>2. ØªÙØ¹ÙŠÙ„ YouTube Data API<br>3. ØµÙ„Ø§Ø­ÙŠØ§Øª API Key'); 
                    return; 
                }
                
                allVideos.sort((a,b)=> new Date(b.publishedAt)-new Date(a.publishedAt));
                filteredVideos = [...allVideos];
                displayVideos(filteredVideos);
            } catch(err) { 
                showError(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${err.message}`); 
            } finally { 
                document.getElementById('loadingContainer').style.display='none'; 
            }
        }

        function updateLoadingProgress(current, total) {
            const progressEl = document.getElementById('loadingProgress');
            progressEl.textContent = `Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø© ${current} Ù…Ù† ${total}... (ØªÙ… Ø¬Ù„Ø¨ ${allVideos.length} ÙÙŠØ¯ÙŠÙˆ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†)`;
        }

        // ğŸ”„ Ø¯Ø§Ù„Ø© Ù…Ø­Ø³Ù‘Ù†Ø© Ù„Ø¬Ù„Ø¨ ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© Ù…Ø¹ Pagination
        async function fetchChannelVideos(channelId) {
            const videosPerRequest = 50; // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù…Ù† YouTube
            const totalVideosNeeded = CONFIG.MAX_VIDEOS_PER_CHANNEL;
            const requestsNeeded = Math.ceil(totalVideosNeeded / videosPerRequest);
            
            let allChannelVideos = [];
            let nextPageToken = null;

            try {
                // Ø¹Ù…Ù„ Ø¹Ø¯Ø© Ø·Ù„Ø¨Ø§Øª Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
                for (let i = 0; i < requestsNeeded; i++) {
                    const url = `https://www.googleapis.com/youtube/v3/search?key=${CONFIG.API_KEY}&channelId=${channelId}&part=snippet&order=date&maxResults=${videosPerRequest}&type=video${nextPageToken ? '&pageToken=' + nextPageToken : ''}`;
                    
                    const response = await fetch(url);
                    
                    if(!response.ok) { 
                        const errorData = await response.json(); 
                        console.error(`Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø© ${channelId}:`, errorData); 
                        break;
                    }
                    
                    const data = await response.json();
                    
                    const videos = data.items.map(item => ({
                        id: item.id.videoId,
                        title: item.snippet.title,
                        channelTitle: item.snippet.channelTitle,
                        thumbnail: item.snippet.thumbnails.medium.url,
                        publishedAt: item.snippet.publishedAt
                    }));
                    
                    allChannelVideos.push(...videos);
                    
                    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ ØµÙØ­Ø© ØªØ§Ù„ÙŠØ©ØŒ Ù†ÙˆÙ‚Ù Ø§Ù„Ø­Ù„Ù‚Ø©
                    if (!data.nextPageToken) {
                        break;
                    }
                    
                    nextPageToken = data.nextPageToken;
                    
                    // Ø¥Ø°Ø§ ÙˆØµÙ„Ù†Ø§ Ù„Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ØŒ Ù†ÙˆÙ‚Ù
                    if (allChannelVideos.length >= totalVideosNeeded) {
                        break;
                    }

                    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø®ÙŠØ± ØµØºÙŠØ± Ø¨ÙŠÙ† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù„ØªØ¬Ù†Ø¨ Rate Limiting
                    await sleep(100);
                }

                // Ù‚Øµ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù„Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¨Ø§Ù„Ø¶Ø¨Ø·
                return allChannelVideos.slice(0, totalVideosNeeded);

            } catch(err) { 
                console.error(`Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ù†Ø§Ø© ${channelId}:`, err); 
                return []; 
            }
        }

        // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ù„ØªØ£Ø®ÙŠØ±
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function displayVideos(videos){
            const container = document.getElementById('videosContainer');
            const statsContainer = document.getElementById('statsContainer');
            
            if(videos.length === 0) { 
                container.innerHTML = '<div class="error">ğŸ˜• Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù„Ù„Ø¨Ø­Ø«</div>'; 
                statsContainer.innerHTML = ''; 
                return; 
            }
            
            statsContainer.innerHTML = `ğŸ“¹ Ø¹Ø¯Ø¯ Ø§Ù„ÙÙŠØ¯ÙŠÙˆÙ‡Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©: <strong>${videos.length}</strong> ÙÙŠØ¯ÙŠÙˆ Ù…Ù† <strong>${CONFIG.ALLOWED_CHANNELS.length}</strong> Ù‚Ù†Ø§Ø©`;
            
            container.innerHTML = videos.map(v => `
                <div class="video-card">
                    <div class="video-thumbnail" onclick="playVideo('${v.id}')">
                        <img src="${v.thumbnail}" alt="${v.title}" loading="lazy">
                        <div class="play-button"></div>
                    </div>
                    <div class="video-info">
                        <div class="video-title">${v.title}</div>
                        <div class="video-channel">ğŸ“º ${v.channelTitle}</div>
                        <div class="video-date">ğŸ“… ${formatDate(v.publishedAt)}</div>
                    </div>
                </div>
            `).join('');
        }

        function playVideo(videoId){
            const player = document.getElementById('videoPlayer');
            const frame = document.getElementById('playerFrame');
            frame.src = `https://www.youtube-nocookie.com/embed/${videoId}?autoplay=1&rel=0`;
            player.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeVideo(){
            const player = document.getElementById('videoPlayer');
            const frame = document.getElementById('playerFrame');
            frame.src = '';
            player.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        document.addEventListener('keydown', (e) => { if(e.key === 'Escape') closeVideo(); });
        
        function showError(message) { 
            document.getElementById('errorContainer').innerHTML = `<div class="error">${message}</div>`; 
            document.getElementById('loadingContainer').style.display = 'none'; 
        }

        function formatDate(dateString){
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if(diffDays === 0) return 'Ø§Ù„ÙŠÙˆÙ…';
            if(diffDays === 1) return 'Ø£Ù…Ø³';
            if(diffDays < 7) return `Ù…Ù†Ø° ${diffDays} Ø£ÙŠØ§Ù…`;
            if(diffDays < 30) return `Ù…Ù†Ø° ${Math.floor(diffDays / 7)} Ø£Ø³Ø§Ø¨ÙŠØ¹`;
            if(diffDays < 365) return `Ù…Ù†Ø° ${Math.floor(diffDays / 30)} Ø£Ø´Ù‡Ø±`;
            return `Ù…Ù†Ø° ${Math.floor(diffDays / 365)} Ø³Ù†Ø©`;
        }
    </script>
</body>
</html>
